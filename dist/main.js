(()=>{"use strict";const e=function(){let e=[];return{people:e,renderPeople:()=>console.log(e),clearPeople:()=>{e.length=0},generateUniqueId:()=>"_"+Math.random().toString(36).substr(2,9)}}(),r=function(){let r={};return{renderPerson:()=>console.log(r),newPerson:(t,n)=>(r={id:e.generateUniqueId(),name:t,year:n},r),clearPerson:()=>{r={}},addPerson:e=>{e.push(r)},removePerson:(e,r)=>{const t=r.findIndex((r=>r.id===e));t>-1&&r.splice(t,1)}}}(),t=function(){let e=[];const r=()=>{e=[]},t=()=>{document.querySelector(".age-library").innerHTML=""};return{getYear:function(n,o){return r(),n.forEach((r=>{let t,n,c;t=parseInt(o)-parseInt(r.year),n=r.name,c=((e,r)=>({name:e,age:r}))(n,t),e.push(c)})),(e=>{t(),e.forEach((e=>{const r=document.querySelector(".age-library"),t=document.createElement("p");t.innerHTML=`Name: ${e.name}, Age: ${e.age}`,r.appendChild(t)}))})(e),e},calculatedAges:e,clearCalculatedAges:r,clearPeopleAgeOutput:t}}(),n=function(){const n=e=>{const r=document.querySelector(`.${e}`),t=document.createElement("p");t.classList.add("error"),t.innerHTML="Missing values detected.",r.appendChild(t)},o=()=>{const e=document.querySelector(".error");e&&e.remove()},c=()=>{const e=document.querySelector(".name"),r=document.querySelector(".birth-year");e.value="",r.value=""},l=e=>{u(),e.forEach((e=>{const r=document.querySelector(".people-library"),t=document.createElement("p"),n=document.createElement("button");n.innerHTML="Delete",n.classList.add("delete"),n.setAttribute("unique-id",`${e.id}`),t.innerHTML=`Name: ${e.name}, Birth Year: ${e.year}`,t.appendChild(n),r.appendChild(t)})),a()},a=()=>{document.querySelector(".people-library").addEventListener("click",(t=>{if(t.target.classList.contains("delete")){const n=t.target.getAttribute("unique-id");r.removePerson(n,e.people),l(e.people)}}))},u=()=>{document.querySelector(".people-library").innerHTML=""};let d;const i=()=>{document.querySelector(".year-announcer").innerHTML=""},s=()=>{document.querySelector(".year-calculate").value=""};return{personInput:function(){document.querySelector(".person-submit").addEventListener("click",(()=>{const t=document.querySelector(".name").value,a=document.querySelector(".birth-year").value;""==t||""==a?n("person-submit-error"):(r.newPerson(t,a),r.addPerson(e.people),l(e.people),c(),o())}))},yearInput:()=>{document.querySelector(".year-submit").addEventListener("click",(()=>{const r=document.querySelector(".year-calculate").value;""==r?n("year-submit-error"):(d=r,(e=>{i();const r=document.querySelector(".year-announcer"),t=document.createElement("p");t.innerHTML=`<h2>Year to calculate: ${e}</h2> `,r.appendChild(t)})(d),t.getYear(e.people,d),s(),o())}))},clearAll:()=>{document.querySelector(".clear-all").addEventListener("click",(()=>{c(),u(),o(),o(),s(),i(),e.clearPeople(),r.clearPerson(),t.clearPeopleAgeOutput()}))},renderExistingPeople:()=>{l(e.people)}}}();n.personInput(),n.yearInput(),n.clearAll(),n.renderExistingPeople()})();